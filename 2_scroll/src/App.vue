<template>
   <div class="container">
      <div v-show="!isSend">
         <div class="agreement" @scroll="getScroll">
            <h1>User Agreement</h1>
            <div class="text">Lorem ipsum dolor sit amet, consectetur adipiscing elit. Sed pretium erat a ex feugiat
               commodo. Fusce blandit dolor non tristique pulvinar. Fusce id purus a ante hendrerit ornare eget at eros.
               Aenean pharetra consequat tortor at sagittis. Morbi sollicitudin pharetra erat, vitae vehicula sem
               ullamcorper eu. Etiam efficitur elit id metus ullamcorper pharetra. Integer lacinia enim in elit pharetra
               fringilla. Nam nulla velit, congue dapibus luctus a, sagittis ut eros. Sed eget vehicula sapien, ac
               facilisis urna. Pellentesque euismod nunc in eros fermentum egestas. Phasellus volutpat diam non porta
               bibendum.
               <br><br>
               Ut vitae venenatis diam, vel fermentum enim. In hac habitasse platea dictumst. Vestibulum ut rutrum
               ipsum.
               Nullam a malesuada sapien, malesuada volutpat elit. Pellentesque ac tincidunt mauris. Vivamus et tempus
               metus, sit amet rutrum dui. Ut convallis condimentum mattis. Nam sagittis felis nec lorem aliquam, quis
               tincidunt arcu ullamcorper. Fusce dignissim non lacus non dignissim. Nunc rutrum eros vel sem pulvinar,
               nec
               porttitor odio pellentesque. Integer ac lectus commodo, viverra nisi a, suscipit ante. Integer dui diam,
               dictum sit amet pellentesque eu, porta vel arcu.
               <br><br>
               Vestibulum tincidunt semper lectus, a sagittis sem hendrerit vel. Aliquam a vestibulum metus. Praesent
               nec
               pharetra eros. Curabitur nec facilisis arcu, non tincidunt sapien. Mauris maximus luctus semper. Aliquam
               erat volutpat. Aliquam vehicula erat nec justo fringilla lobortis. Nunc euismod ante enim, tempor
               placerat
               ligula feugiat mollis. Aenean diam elit, convallis ut mollis at, pretium ut purus. Curabitur et diam sed
               arcu semper finibus ut vulputate metus. Nullam mattis id erat eget sodales. Suspendisse et risus
               elementum,
               placerat quam vel, porta ante. Nulla at tincidunt mauris. Mauris pretium sem nec nibh posuere, quis
               auctor
               elit semper. Proin non neque ut enim tincidunt fermentum eget ac felis.
               <br><br>
               Etiam in diam elit. Pellentesque tempor purus non mi elementum tempor. Ut vestibulum convallis interdum.
               Aenean dapibus, massa nec fringilla rhoncus, lacus arcu molestie enim, id luctus lectus mi a mi. Sed
               blandit
               odio pretium, volutpat quam id, luctus magna. Phasellus leo tortor, facilisis id sapien vel, dignissim
               egestas dolor. Curabitur aliquam nulla vitae varius condimentum. Maecenas rutrum id leo in laoreet.
               Mauris
               lectus turpis, viverra eget sollicitudin sed, lobortis sit amet velit. Proin eu nunc ac massa
               pellentesque
               placerat in in lectus. Phasellus aliquam turpis nec tortor luctus varius quis a elit. Integer euismod
               molestie ex id blandit. Aenean interdum et urna et lobortis. Aenean ornare nisl vitae elit condimentum
               euismod.
               <br><br>
               Vivamus mattis et eros et dictum. Praesent scelerisque dapibus condimentum. Vestibulum eget vulputate
               orci,
               non porta diam. Morbi vitae ligula rutrum, laoreet justo tempor, cursus sem. Nullam consequat nisl quis
               maximus malesuada. Quisque nec dignissim risus. Phasellus rutrum sodales ante, vitae ultrices nisi
               placerat
               vitae. Fusce pretium quam eu dolor maximus, id ultrices nunc imperdiet. Nunc lobortis elementum arcu, sit
               amet imperdiet quam aliquam sit amet. Curabitur in tincidunt risus, sit amet volutpat turpis. Phasellus
               rutrum leo et nisl placerat, sit amet egestas nisi consectetur. Nullam iaculis feugiat semper.
               Pellentesque
               venenatis, ex eget malesuada tempor, elit mauris semper eros, at ultrices turpis quam sit amet odio.
               Suspendisse aliquam tellus nec suscipit sagittis.
               <br><br>
               Praesent lobortis ipsum id ligula porta, vitae cursus nisi pretium. Sed non risus lacus. Integer arcu
               velit,
               rutrum nec neque nec, porttitor posuere elit. Orci varius natoque penatibus et magnis dis parturient
               montes,
               nascetur ridiculus mus. Class aptent taciti sociosqu ad litora torquent per conubia nostra, per inceptos
               himenaeos. Integer pretium mauris non arcu mollis placerat. Morbi tellus orci, blandit sed sem
               sollicitudin,
               dapibus dictum ante. Donec sit amet nisi ut nisl commodo elementum a et sapien. Cras molestie et turpis
               quis
               efficitur. Nulla a erat sed massa egestas ultricies nec eget velit. Praesent vitae finibus sem. Duis sed
               orci lorem. Nulla aliquet, ex non commodo convallis, nunc massa pretium elit, ut luctus dui enim vehicula
               nulla. Vestibulum risus odio, blandit nec eros non, luctus fringilla nulla. Sed odio nisl, imperdiet at
               consequat eget, mattis vel massa.
               <br><br>
               Vestibulum vestibulum erat arcu, non hendrerit massa lacinia id. Ut pulvinar arcu vitae placerat egestas.
               Cras sit amet faucibus metus. Duis a diam vitae massa viverra faucibus. Vivamus id sollicitudin justo.
               Curabitur enim tellus, elementum et ligula ut, posuere dignissim ante. Vestibulum dapibus tellus vitae
               erat
               imperdiet, nec ultrices diam faucibus. Nullam aliquet mi eget dictum feugiat. Quisque rhoncus eros
               sagittis
               odio dictum, in egestas elit vulputate. Suspendisse commodo nisi ut placerat scelerisque.
               <br><br>
               Ut non orci in est condimentum porttitor volutpat a sem. Vestibulum id euismod nisi. Nulla ut tempus sem.
               Aenean cursus rutrum cursus. Ut porttitor viverra urna quis eleifend. Cras commodo, sem in feugiat
               elementum, est dui vehicula tortor, at vulputate magna lacus quis tellus. Fusce eget nisi nunc. Donec at
               faucibus velit, sed ornare eros. Vivamus pharetra nunc in dolor vehicula commodo. Nam molestie quam
               magna,
               eget sodales nisi pellentesque sit amet. Etiam viverra leo nibh, non porta libero cursus vitae.
               <br><br>
               Vestibulum ut enim efficitur, porttitor elit eget, eleifend tortor. Interdum et malesuada fames ac ante
               ipsum primis in faucibus. Duis nec volutpat libero. Nam in ipsum at nunc tristique laoreet. Etiam
               vehicula
               dui et nisl rutrum lobortis. Etiam commodo consectetur eros at vehicula. Duis pretium nunc vel imperdiet
               lobortis.
               <br><br>
               Phasellus scelerisque eu enim a rhoncus. Lorem ipsum dolor sit amet, consectetur adipiscing elit. Nulla
               non
               efficitur ipsum, eget sodales neque. Donec faucibus nisi vitae fermentum sodales. Aenean non diam sit
               amet
               nulla pulvinar suscipit. Nam ac dapibus purus, eget tempor elit. Curabitur vel sem a nulla hendrerit
               malesuada. Maecenas dictum, leo eget imperdiet tincidunt, risus ex porta erat, sodales pharetra ligula
               lorem
               at metus. Etiam at neque eget odio pellentesque blandit. Etiam tellus ipsum, bibendum nec lacus
               dignissim,
               bibendum imperdiet elit. Nulla accumsan, purus nec scelerisque finibus, mauris diam laoreet eros, ut
               tempus
               orci augue pellentesque mauris. Aenean hendrerit urna vel libero blandit, sed ullamcorper ipsum aliquet.
            </div>
         </div>
         <div class="progress_bar">
            <span class="progress" :style="'width: ' + progressScroll + '%'"></span>
         </div>
         <form v-show="isScroll">
            <div class="show_inputs">
               <label for="agree">
                  <input type="checkbox" name="agree" id="agree" :checked="isAgree" @click="isAgree = !isAgree">
                  You agree?
               </label>
               <label for="spam">
                  <input type="checkbox" name="spam" id="spam" :checked="spam.value" @click="spam.value = !spam.value">
                  Do you want to spam?
               </label>
            </div>

            <div v-show="spam.value" class="hidden_inputs">
               <label for="spam_phone">
                  <input type="radio" name="spam" id="spam_phone" value="phone" v-model="spam.type">
                  Phone
               </label>
               <label for="spam_email">
                  <input type="radio" name="spam" id="spam_email" value="email" v-model="spam.type">
                  E-mail
               </label>
            </div>
            <button type="submit" class="send" :disabled="!isAgree" @click.prevent="isSend = !isSend">Send</button>
         </form>
      </div>

      <table cellspacing="0" v-show="isSend">
         <tr>
            <td>Agree</td>
            <td :style="'color:' + agree.color">{{ agree.value }}</td>
         </tr>
         <tr>
            <td>Spam</td>
            <td :style="'color:' + spamComputed.color">{{ spamComputed.value }}</td>
         </tr>
         <tr v-show="spam.value">
            <td>Type Spam</td>
            <td>{{ spam.type }}</td>
         </tr>

         <button class="back" @click="isSend = !isSend">Back</button>
      </table>
   </div>
</template>

<script>
export default {
   name: 'App',
   data() {
      return {
         isSend: false,
         isAgree: false,
         isScroll: false,
         progressScroll: 0,
         spam: { value: false, type: '' }
      }
   },
   computed: {
      agree() {
         return this.formatingResponse(this.isAgree)

      },
      spamComputed() {
         return this.formatingResponse(this.spam.value)
      }
   },
   methods: {
      getScroll(e) {
         let client = e.target.clientHeight
         let scroll = e.target.scrollHeight
         let top = Math.trunc(e.target.scrollTop)

         if (top + client > this.progressScroll / 100 * scroll)
            this.progressScroll = Math.trunc(top / (scroll - client) * 100)

         if (Math.ceil(top + client) === scroll)
            this.isScroll = true
      },
      formatingResponse(bool) {
         if (bool)
            return { value: 'Yes', color: 'green' }
         else
            return { value: 'No', color: 'orange' }
      }
   }
}
</script>

<style>
* {
   padding: 0;
   margin: 0;
   box-sizing: border-box;
}

body {
   width: 100%;
   height: 100vh;
   color: #fff;
   font-family: 'Courier New', Courier, monospace;
   background-color: rgb(52, 52, 52);
}

.container {
   max-width: 1100px;
   margin: auto;
   padding: 20px;
}

h1 {
   text-align: center;
   margin-bottom: 20px;
}

.agreement {
   height: 500px;
   overflow-y: scroll;
   margin-bottom: 20px;
}

.progress_bar {
   background-color: #fff;
   border-radius: 3px;
   width: 100%;
   height: 5px;
}

.progress {
   display: block;
   height: 5px;
   border-radius: 3px;
   background-color: red;
}

form {
   width: 500px;
   margin-top: 20px;
   display: flex;
   flex-wrap: wrap;
   justify-content: space-evenly;
}

label {
   display: flex;
   align-items: center;
   cursor: pointer;
}

label>input {
   cursor: pointer;
   margin-right: 10px;
}

button {
   cursor: pointer;
   border: unset;
   border-radius: 4px;
   font-size: 14px;
   padding: 8px 20px;
   transition: .2s;
}

button:hover {
   transform: scale(1.05);
}

button.back {
   margin-top: 20px;
}

td {
   width: 100px;
   text-align: center;
   border: 1px solid #fff;
}
</style>
